{% extends "base.html" %}

{% from "utils.jinja" import errorBox %}
{% from "wklb/modals/deleteResultBox.jinja" import deleteBox %}
{% from "wklb/modals/teamInfo.jinja" import teamInfo, teamInfoLink %}

{% block content%}

{% for ti in teamInfos %}
    {{teamInfo(ti, current_user)}}
{% endfor %}

<div class="table-responsive">
    <table class="table table-sm small rounded rounded-4 overflow-hidden caption-top table-striped table-light">
        <caption class="text-center"><h3>Ergebnisse</h3></caption>
        <thead>
            <th/><th>Heim</th> <th>Gast</th> <th>Ergebnis</th> <th/>
        </thead>
        <tbody>
            {% if current_user.is_authenticated %}
            <tr>
                <td colspan="5">
                    {% include 'wklb/modals/submitResultBox.jinja' %}
                </td>
            </tr>
            {% endif %}
            {% for r in rows %}
            <tr>
                <td>
                    <span class="small">{{ r.date.strftime("%d.%m.%y") }}</span>
                </td>
                <td>
                    {{teamInfoLink(r.home_team, current_user)}}
                </td>
                <td>
                    {{teamInfoLink(r.visiting_team, current_user)}}
                </a>
                </td>
                <td>{{ r.home_team_pts }} : {{ r.visiting_team_pts }}</td>
                <td>
                    {% if current_user.is_authenticated and current_user.id == r.home_team.user.id %}
                        {{ deleteBox(r.id, r.home_team.name, r.visiting_team.name) }}
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
